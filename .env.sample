# Universal Agent environment template
# Copy to .env and fill in real values.

# ============================
# Core API Keys
# ============================
COMPOSIO_API_KEY=
COMPOSIO_USER_ID=

# Anthropic / Z.ai
ANTHROPIC_API_KEY=
ANTHROPIC_BASE_URL=
ANTHROPIC_AUTH_TOKEN=
ZAI_API_KEY=

# Optional integrations
GITHUB_PERSONAL_ACCESS_TOKEN=
EXA_API_KEY=
CONTEXT7_API_KEY=
CRAWL4AI_API_KEY=
LETTA_API_KEY=
LETTA_PROJECT_ID=
TODOIST_API_TOKEN=

# ============================
# Model Configuration
# ============================
MODEL_NAME=claude-sonnet-4-5-20250929
MAX_TOKENS=15000
API_TIMEOUT_MS=30000
# Process turn runtime cap in seconds (0 = disabled/no hard cap)
UA_PROCESS_TURN_TIMEOUT_SECONDS=0

# ============================
# Logging / Observability
# ============================
LOG_LEVEL=INFO
ENVIRONMENT=development
CLAUDE_CODE_ENABLE_TELEMETRY=1
LOGFIRE_ORG=
LOGFIRE_PROJECT=
LOGFIRE_READ_TOKEN=
LOGFIRE_WRITE_TOKEN=
LOGFIRE_TOKEN=${LOGFIRE_WRITE_TOKEN}
# Logfire full payload instrumentation (debug mode)
UA_LOGFIRE_REDACTION_LEVEL=balanced
UA_LOGFIRE_FULL_PAYLOAD_MODE=false
UA_LOGFIRE_FULL_PAYLOAD_REDACT=true
UA_LOGFIRE_FULL_PAYLOAD_REDACT_EMAILS=true
UA_LOGFIRE_FULL_PAYLOAD_MAX_CHARS=50000


# ============================
# Telegram (optional)
# ============================
TELEGRAM_BOT_TOKEN=
ALLOWED_USER_IDS=
WEBHOOK_SECRET=
WEBHOOK_URL=
# Long-running Telegram task timeout (seconds)
UA_TELEGRAM_TASK_TIMEOUT_SECONDS=1800
# Auto-render markdown attachments to HTML when uploading for Gmail sends.
# Set to 0 to keep raw .md attachments.
UA_GMAIL_RENDER_MARKDOWN_ATTACHMENTS=1

# ============================
# Memory (canonical OpenClaw-style memory)
# ============================
# Recommended defaults: ON.
UA_MEMORY_ENABLED=1
UA_MEMORY_PROVIDER=auto
UA_MEMORY_SOURCES=memory,sessions
UA_MEMORY_SCOPE=direct_only
UA_MEMORY_SESSION_ENABLED=1
UA_MEMORY_FLUSH_ENABLED=1
UA_MEMORY_FLUSH_SOFT_THRESHOLD_TOKENS=4000
# Shared canonical memory workspace so memory survives session workspace cleanup.
# Use an absolute path in production (example: /opt/universal_agent/Memory_System/ua_shared_workspace).
UA_SHARED_MEMORY_DIR=Memory_System/ua_shared_workspace
UA_MEMORY_MAX_TOKENS=800
UA_MEMORY_RECENT_ENTRIES=8
UA_MEMORY_FLUSH_MAX_CHARS=4000

# ============================
# Heartbeat (gateway scheduler)
# ============================
# Default off. Enable explicitly for dev/testing.
UA_ENABLE_HEARTBEAT=0
UA_DISABLE_HEARTBEAT=0
UA_HEARTBEAT_INTERVAL=300
UA_HEARTBEAT_EVERY=30m
UA_HEARTBEAT_ACTIVE_HOURS=
UA_HEARTBEAT_ACTIVE_START=
UA_HEARTBEAT_ACTIVE_END=
UA_HEARTBEAT_TIMEZONE=USER
UA_HEARTBEAT_REQUIRE_FILE=0
UA_HEARTBEAT_PROMPT=
UA_HEARTBEAT_ACK_MAX_CHARS=300
UA_HEARTBEAT_OK_TOKENS=HEARTBEAT_OK,UA_HEARTBEAT_OK
UA_HEARTBEAT_EXEC_TIMEOUT=300
UA_HEARTBEAT_IDLE_TIMEOUT=300
# Keep idle sessions registered by default so proactive heartbeat behavior is not silently suppressed.
# Set to 1 only if you explicitly want idle sessions removed from the heartbeat scheduler.
UA_HEARTBEAT_UNREGISTER_IDLE=0
UA_HB_DELIVERY_MODE=last
UA_HB_EXPLICIT_SESSION_IDS=
UA_HB_SHOW_OK=false
UA_HB_SHOW_ALERTS=true
UA_HB_DEDUPE_WINDOW=86400
UA_HB_USE_INDICATOR=false
UA_HEARTBEAT_MOCK_RESPONSE=0

# ============================
# Cron (proactive jobs)
# ============================
UA_ENABLE_CRON=0
UA_DISABLE_CRON=0
UA_CRON_MAX_CONCURRENCY=1
UA_CRON_MOCK_RESPONSE=0
UA_SYSTEM_EVENTS_MAX=100
UA_GATEWAY_PROCESS_STDIO_REDIRECT=0

# ============================
# Ops / Control Plane
# ============================
# Optional bearer token to protect /api/v1/ops/* endpoints
UA_OPS_TOKEN=
NEXT_PUBLIC_UA_OPS_TOKEN=
# Optional path for ops config (defaults to AGENT_RUN_WORKSPACES/ops_config.json)
UA_OPS_CONFIG_PATH=
# Optional path for approvals store (defaults to AGENT_RUN_WORKSPACES/approvals.json)
UA_APPROVALS_PATH=
# Optional runtime DB overrides:
# - UA_RUNTIME_DB_PATH controls Simone queue/checkpoint operational state.
# - UA_CODER_VP_DB_PATH controls CODIE mission/session telemetry state.
# Keeping these separate reduces sqlite write-lock contention under mixed loads.
# UA_RUNTIME_DB_PATH=<repo>/AGENT_RUN_WORKSPACES/runtime_state.db
# UA_CODER_VP_DB_PATH=<repo>/AGENT_RUN_WORKSPACES/coder_vp_state.db
# External primary VP runtime (control-plane/data-plane split)
UA_VP_DISPATCH_MODE=db_pull
UA_VP_ENABLED_IDS=vp.coder.primary,vp.general.primary
UA_VP_EXTERNAL_DISPATCH_ENABLED=0
UA_VP_HARD_BLOCK_UA_REPO=1
UA_VP_CODER_WORKSPACE_ROOT=
UA_VP_GENERAL_WORKSPACE_ROOT=
UA_VP_POLL_INTERVAL_SECONDS=5
UA_VP_LEASE_TTL_SECONDS=120
UA_VP_MAX_CONCURRENT_MISSIONS=1
# Allowlisted handoff root for CODIE artifacts/outputs that need to be re-imported.
UA_VP_HANDOFF_ROOT=/opt/universal_agent/vp_handoff
# Gateway/API transport and websocket timeout policy
UA_GATEWAY_HTTP_TIMEOUT_SECONDS=60
UA_API_GATEWAY_OWNER_TIMEOUT_SECONDS=20
UA_GATEWAY_WS_HANDSHAKE_TIMEOUT_SECONDS=20
UA_GATEWAY_WS_OPEN_TIMEOUT_SECONDS=20
UA_GATEWAY_WS_CLOSE_TIMEOUT_SECONDS=10
UA_GATEWAY_WS_PING_INTERVAL_SECONDS=20
UA_GATEWAY_WS_PING_TIMEOUT_SECONDS=20
UA_WS_SEND_TIMEOUT_SECONDS=8
UA_SESSION_CANCEL_WAIT_SECONDS=10
# Deployment profile defaults (local_workstation | standalone_node | vps)
UA_DEPLOYMENT_PROFILE=local_workstation
# Restrict workspace selection to UA_WORKSPACES_DIR when disabled
UA_ALLOW_EXTERNAL_WORKSPACES=0
# Override skills directory (defaults to .claude/skills)
UA_SKILLS_DIR=
# Comma-separated list of disabled skills (additional to ops config)
UA_SKILLS_DISABLED=
# Optional web UI URL used for channel probes
UA_WEB_UI_URL=
# Optional local mirror roots for VPS debug sync
# Recommended persistent defaults (avoid tmp for long-lived mirrors):
# UA_LOCAL_MIRROR_DIR=<repo>/AGENT_RUN_WORKSPACES/remote_vps_workspaces
# UA_LOCAL_ARTIFACTS_MIRROR_DIR=<repo>/artifacts/remote_vps_artifacts
# UA_REMOTE_SYNC_STATE_DIR=<repo>/AGENT_RUN_WORKSPACES/remote_vps_sync_state
# Completion-aware mirror policy across session activities (web UI/API, hooks, Telegram).
# Keep enabled to avoid pulling half-written session/artifact output.
# UA_REMOTE_SYNC_REQUIRE_READY_MARKER=true
# UA_REMOTE_SYNC_READY_MARKER_FILENAME=sync_ready.json
# UA_REMOTE_SYNC_READY_MIN_AGE_SECONDS=45
# UA_REMOTE_SYNC_READY_SESSION_PREFIX=session_,tg_
# Runtime marker writer used by gateway run_query (e.g., Telegram sessions).
# UA_RUNTIME_SYNC_READY_MARKER_ENABLED=true
# UA_RUNTIME_SYNC_READY_MARKER_FILENAME=sync_ready.json
# Optional API-side aliases used by /api/vps/* endpoints:
# UA_VPS_WORKSPACES_MIRROR_DIR=<repo>/AGENT_RUN_WORKSPACES/remote_vps_workspaces
# UA_VPS_ARTIFACTS_MIRROR_DIR=<repo>/artifacts/remote_vps_artifacts

# ============================
# Hooks / YouTube Ingest (optional)
# ============================
# Enable hooks ingress and set a bearer token for /api/v1/hooks/*
UA_HOOKS_ENABLED=0
UA_HOOKS_TOKEN=

# Local YouTube transcript ingest worker mode:
# - "" (default): disabled
# - local_worker: call /api/v1/youtube/ingest before dispatching YouTube runs
UA_HOOKS_YOUTUBE_INGEST_MODE=
UA_HOOKS_YOUTUBE_INGEST_URL=
UA_HOOKS_YOUTUBE_INGEST_TOKEN=
UA_HOOKS_YOUTUBE_INGEST_TIMEOUT_SECONDS=120
UA_HOOKS_YOUTUBE_INGEST_RETRY_ATTEMPTS=3
UA_HOOKS_YOUTUBE_INGEST_RETRY_DELAY_SECONDS=20
UA_HOOKS_YOUTUBE_INGEST_RETRY_MAX_DELAY_SECONDS=90
UA_HOOKS_YOUTUBE_INGEST_RETRY_JITTER_SECONDS=3
UA_HOOKS_YOUTUBE_INGEST_MIN_CHARS=160
UA_HOOKS_YOUTUBE_INGEST_COOLDOWN_SECONDS=600
UA_HOOKS_YOUTUBE_INGEST_INFLIGHT_TTL_SECONDS=900
# If 1, proceed with degraded run when ingest fails; if 0, defer dispatch until ingest recovers.
UA_HOOKS_YOUTUBE_INGEST_FAIL_OPEN=0

# ============================
# Misc
# ============================
DEFAULT_USER_ID=
EDGAR_IDENTITY=
UA_PRIMARY_EMAIL=
UA_NOTIFICATION_EMAIL=kevinjdragan@gmail.com
CONSOLE_WIDTH=0
# UV cache path (optional, keep inside repo to avoid permission errors)
UV_CACHE_DIR=
# Watchdog health probe timeout (seconds)
UA_WATCHDOG_HTTP_TIMEOUT_SECONDS=8

# Web UI websocket reconnect/keepalive tuning
NEXT_PUBLIC_UA_WS_MAX_RECONNECT_ATTEMPTS=20
NEXT_PUBLIC_UA_WS_RECONNECT_BASE_DELAY_MS=1000
NEXT_PUBLIC_UA_WS_RECONNECT_MAX_DELAY_MS=30000
NEXT_PUBLIC_UA_WS_CONNECT_TIMEOUT_MS=15000
NEXT_PUBLIC_UA_WS_PING_INTERVAL_MS=30000
NEXT_PUBLIC_UA_WS_STALE_AFTER_MS=90000

# ============================
# Token limits
# ============================
CLAUDE_CODE_MAX_OUTPUT_TOKENS=64000
MAX_MCP_OUTPUT_TOKENS=64000
UA_BATCH_MAX_WORDS=50000

# ============================
# Z.AI Vision (optional)
# ============================
# Enables zai_vision MCP server for video/image analysis.
# Z_AI_API_KEY=
# Z_AI_MODE=ZAI

# ============================
# Artifacts (Durable Outputs)
# ============================
# Persistent artifacts root. Default: <repo-root>/artifacts
# Artifacts are NOT intended to be committed to git.
# UA_ARTIFACTS_DIR=/absolute/path/to/artifacts
