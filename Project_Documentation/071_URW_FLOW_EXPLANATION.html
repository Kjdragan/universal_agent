<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>URW Harness Flow Visualization</title>
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        mermaid.initialize({ startOnLoad: true, theme: 'neutral' });
    </script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
            Error loading webview: Error: Could not register service worker: InvalidStateError: Failed to register a ServiceWorker: The document is in an invalid state..
        }

        .diagram-container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }

        h1,
        h2 {
            color: #333;
        }

        .explanation {
            margin-bottom: 15px;
            line-height: 1.6;
            color: #555;
        }
    </style>
</head>

<body>
    <h1>URW Harness Flow Visualization</h1>
    <p>Based on Session: session_20260117_173325_c8d8096d</p>
    <p><em>generated by Universal Agent to support high-quality visualization</em></p>

    <!-- DIAGRAM 1 -->
    <h2>1. High-Level Architecture</h2>
    <div class="explanation">
        The URW Harness acts as a project manager, orchestrating the UniversalAgent through distinct phases.
    </div>
    <div class="diagram-container">Error loading webview: Error: Could not register service worker: InvalidStateError:
        Failed to register a ServiceWorker: The document is in an invalid state..
        <pre class="mermaid">
graph TD
    User([User Request]) --> Launch[CLI / Script Launch]
    Launch --> Orch{URW Orchestrator}
    
    subgraph Planning ["ðŸ§  Planning"]
        Orch -->|1. Request Strategy| Planner[Phase Planner]
        Planner -->|2. Return Phased Plan| Orch
    end
    
    subgraph Execution ["âš™ï¸ Execution Loop"]
        Orch -->|3. Start Phase| Agent[Universal Agent]
        Agent -->|Tool Calls| Tools[File System / Internet]
        Tools -->|Results| Agent
        Agent -->|Write| Artifacts[(Workspace Artifacts)]
        Agent -->|Task Complete| Eval[Composite Evaluator]
    end
    
    Eval -->|4. Verification| Orch
    Orch -->|5. Next Phase| Agent

    classDef human fill:#ff9999,stroke:#333,stroke-width:2px;
    classDef brain fill:#99ccff,stroke:#333,stroke-width:2px;
    classDef worker fill:#99ff99,stroke:#333,stroke-width:2px;
    
    class User human;
    class Orch,Planner brain;
    class Agent,Eval worker;
        </pre>
    </div>

    <!-- DIAGRAM 2 -->
    <h2>2. Phase Execution Loop</h2>
    <div class="explanation">
        Focusing on Phase 1: Define Scope.
    </div>
    <div class="diagram-container">
        <pre class="mermaid">
sequenceDiagram
    autonumber
    participant Orch as ðŸ§  Orchestrator
    participant Agent as ðŸ¤– Universal Agent
    participant FS as ðŸ“‚ File System
    
    Note over Orch, Agent: Phase 1 Starts
    Orch->>Agent: Initialize(Task="Define Scope")
    
    rect rgb(240, 248, 255)
        Note right of Agent: Agent Thinking & Working
        Agent->>Agent: "I need to plan the research."
        Agent->>FS: Write "research_scope.md"
        FS-->>Agent: Success
        
        Agent->>Agent: "Ready for next phase."
        Agent->>FS: Write "handoff.json"
        FS-->>Agent: Success
    end
    
    Agent->>Orch: Task Completed
    Orch->>FS: Verify "research_scope.md" exists?
    FS-->>Orch: Yes
    Orch->>Orch: Mark Phase 1 Complete
        </pre>
    </div>

    <!-- DIAGRAM 3 -->
    <h2>3. File Structure</h2>
    <div class="explanation">
        Strict isolation structure for every session.
    </div>
    <div class="diagram-container">
        <pre class="mermaid">
graph LR
    Root[urw_sessions/] --> Session[session_2026...]
    
    subgraph SessionDir ["ðŸ“ Session Directory"]
        Session --> Trace[trace.json]
        Session --> Workspace[workspace/]
        
        Workspace --> Artifacts[artifacts/]
        Workspace --> Downloads[downloads/]
    end
    
    subgraph Content ["ðŸ“„ Key Artifacts"]
        Artifacts --> Scope[research_scope.md]
        Artifacts --> Handoff[handoff.json]
        Artifacts --> Report[final_report.html]
    end
    
    style Trace fill:#ffcccc,stroke:#333
    style Scope fill:#ccffcc,stroke:#333
    style Handoff fill:#ccccff,stroke:#333
        </pre>
    </div>

</body>

</html>